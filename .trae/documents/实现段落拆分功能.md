# 段落拆分功能实现方案

## 1. 功能概述
实现文件段落拆分功能，允许用户根据目标时长（5-20分钟）拆分上传的文件内容，生成适合阅读练习的段落。

## 2. 技术方案

### 2.1 新增页面组件
- 创建 `FileProcessingPage` 组件，参照原型设计实现文件处理界面
- 集成路由配置，支持从文件管理页面跳转

### 2.2 新增服务方法
- 在 `parseService.ts` 中新增 `splitParagraphsByDuration` 方法，根据目标时长智能拆分段落
- 实现基于词数和阅读速度的段落时长估算

### 2.3 数据结构设计
- 扩展现有 `Paragraph` 接口，添加词数和估算时长字段
- 新增 `SplitConfig` 接口，用于配置拆分参数

### 2.4 前端实现
- 实现目标时长滑块控制（5-20分钟）
- 实现段落拆分、重置、保存功能
- 显示拆分结果和统计信息
- 添加加载状态和操作反馈

## 3. 实现步骤

### 3.1 创建页面组件
- 创建 `FileProcessingPage.tsx` 文件
- 实现设置面板和内容预览区域
- 实现滑块控制和按钮交互

### 3.2 实现段落拆分逻辑
- 实现词数统计功能
- 实现基于阅读速度的时长估算
- 实现智能段落拆分算法

### 3.3 集成路由配置
- 在 `App.tsx` 中添加文件处理页面路由
- 实现从文件管理页面的跳转逻辑

### 3.4 实现保存功能
- 实现拆分结果的保存逻辑
- 集成现有内容服务

## 4. 页面结构

### 4.1 设置面板
- 目标时长滑块（5-20分钟）
- 拆分、重置、保存按钮

### 4.2 内容预览
- 文件信息显示
- 原始内容预览

### 4.3 拆分结果
- 段落列表展示
- 统计信息显示（总段落数、平均词数等）

## 5. 核心算法

### 5.1 词数统计
- 实现英文词数统计
- 支持中文和数字的合理计数

### 5.2 时长估算
- 基于平均阅读速度（中文300字/分钟，英文200词/分钟）
- 动态调整以匹配目标时长

### 5.3 智能拆分
- 保持段落完整性
- 基于目标时长调整段落长度
- 支持手动调整

## 6. 集成与测试

### 6.1 路由集成
- 配置文件处理页面路由
- 实现从文件管理页面的跳转

### 6.2 服务集成
- 集成现有内容服务
- 实现数据持久化

### 6.3 测试验证
- 测试不同文件类型的拆分效果
- 测试不同目标时长的拆分结果
- 测试保存功能的完整性

## 7. 预期效果

- 用户可以从文件管理页面跳转到文件处理页面
- 用户可以设置目标时长并拆分段落
- 用户可以预览拆分结果并保存
- 拆分结果符合目标时长要求
- 界面符合原型设计规范